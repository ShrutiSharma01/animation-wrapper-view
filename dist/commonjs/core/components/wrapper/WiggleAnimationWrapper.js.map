{"version":3,"sources":["WiggleAnimationWrapper.tsx"],"names":["WiggleAnimationWrapper","BaseAnimationWrapper","constructor","props","animationStarted","_wiggleAnimation","reset","start","animationFinished","stopAnimation","state","getAnimationStateFromProps","duration","animationConfig","animationDuration","wiggleDistance","Animated","sequence","timing","translateX","toValue","useNativeDriver","UNSAFE_componentWillReceiveProps","nextProps","_nextContext","nextState","setState","stop","resetAnimation","setValue","renderAnimation","content","justifyContent","alignItems","transform","_","Value","wiggleCount"],"mappings":";;;;;;;AAEA;;AACA;;AACA;;;;;;AAcO,MAAMA,sBAAN,SAAqCC,0CAArC,CAAsG;AAGlGC,EAAAA,WAAW,CAACC,KAAD,EAA8B;AAC5C,UAAMA,KAAN;;AAD4C;;AAAA,4CAmCxB,MAAM;AAC1B,WAAKC,gBAAL;;AACA,WAAKC,gBAAL,CAAsBC,KAAtB;;AACA,WAAKD,gBAAL,CAAsBE,KAAtB,CAA4B,MAAM;AAAE,aAAKC,iBAAL;AAA0B,OAA9D;AACH,KAvC+C;;AAAA,6CAkDvB,MAAM;AAC3B,WAAKC,aAAL,GAD2B,CAE3B;AACH,KArD+C;;AAE5C,SAAKC,KAAL,GAAa,KAAKC,0BAAL,CAAgCR,KAAhC,CAAb;AAEA,UAAMS,QAAQ,GAAGT,KAAK,CAACU,eAAN,CAAsBC,iBAAvC;AACA,UAAMC,cAAc,GAAGZ,KAAK,CAACU,eAAN,CAAsBE,cAA7C;AAEA,SAAKV,gBAAL,GAAwBW,sBAASC,QAAT,CAAkB,CACtCD,sBAASE,MAAT,CAAgB,KAAKR,KAAL,CAAWS,UAA3B,EAAuC;AACnCP,MAAAA,QAAQ,EAAEA,QAAQ,GAAG,CADc;AAEnCQ,MAAAA,OAAO,EAAE,CAACL,cAFyB;AAGnCM,MAAAA,eAAe,EAAE;AAHkB,KAAvC,CADsC,EAMtCL,sBAASE,MAAT,CAAgB,KAAKR,KAAL,CAAWS,UAA3B,EAAuC;AACnCP,MAAAA,QAAQ,EAAEA,QADyB;AAEnCQ,MAAAA,OAAO,EAAEL,cAF0B;AAGnCM,MAAAA,eAAe,EAAE;AAHkB,KAAvC,CANsC,EAWtCL,sBAASE,MAAT,CAAgB,KAAKR,KAAL,CAAWS,UAA3B,EAAuC;AACnCP,MAAAA,QAAQ,EAAE,KAAKT,KAAL,CAAWU,eAAX,CAA2BC,iBAA3B,GAA+C,CADtB;AAEnCM,MAAAA,OAAO,EAAE,CAF0B;AAGnCC,MAAAA,eAAe,EAAE;AAHkB,KAAvC,CAXsC,CAAlB,CAAxB;AAiBH;;AAEMC,EAAAA,gCAAgC,CAACC,SAAD,EAAkCC,YAAlC,EAA2D;AAC9F,QAAID,SAAS,KAAK,KAAKpB,KAAvB,EAA8B;AAC1B,YAAMsB,SAAsC,GAAG,KAAKd,0BAAL,CAAgCY,SAAhC,CAA/C;;AACA,UAAI,QAAQE,SAAZ,EAAuB;AACnB,aAAKC,QAAL,CAAcD,SAAd;AACH;AACJ;AACJ;;AAQMhB,EAAAA,aAAa,GAAS;AACzB,SAAKJ,gBAAL,CAAsBsB,IAAtB;AACH;;AAEMC,EAAAA,cAAc,GAAS;AAC1B,SAAKnB,aAAL;AACA,SAAKC,KAAL,CAAWS,UAAX,CAAsBU,QAAtB,CAA+B,CAA/B;AACH;;AAOSC,EAAAA,eAAe,CAACC,OAAD,EAA4C;AACjE,UAAMZ,UAAU,GAAG,KAAKT,KAAL,CAAWS,UAA9B;AAEA,wBACI,6BAAC,qBAAD,CAAU,IAAV;AACI,MAAA,KAAK,EAAE;AACHa,QAAAA,cAAc,EAAE,QADb;AAEHC,QAAAA,UAAU,EAAE,QAFT;AAGHC,QAAAA,SAAS,EAAE,CACP;AAAEf,UAAAA;AAAF,SADO;AAHR;AADX,OAQKY,OARL,CADJ;AAYH;;AAESpB,EAAAA,0BAA0B,CAACwB,CAAD,EAAgD;AAChF,WAAO;AACHhB,MAAAA,UAAU,EAAE,IAAIH,sBAASoB,KAAb,CAAmB,CAAnB,CADT;AAEHC,MAAAA,WAAW,EAAE;AAFV,KAAP;AAIH;;AAhFwG","sourcesContent":["\n\nimport { Animated } from 'react-native';\nimport React from 'react';\nimport { BaseAnimationWrapper } from './BaseAnimationWrapper';\nimport BaseAnimationConfig from '../../data/BaseAnimationConfig';\nimport { WiggleAnimationConfig } from '../../data/WiggleAnimation';\nimport { AnimationWrapperProps } from '../../Types';\n\n\ninterface WiggleAnimationState {\n    translateX: Animated.Value;\n    wiggleCount: number;\n}\nexport interface WiggleAnimationProps extends AnimationWrapperProps  {\n    animationConfig: WiggleAnimationConfig;\n}\n\nexport class WiggleAnimationWrapper extends BaseAnimationWrapper<WiggleAnimationProps, WiggleAnimationState> {\n\n    private _wiggleAnimation: Animated.CompositeAnimation;\n    public constructor(props: WiggleAnimationProps) {\n        super(props);\n        this.state = this.getAnimationStateFromProps(props);\n\n        const duration = props.animationConfig.animationDuration;\n        const wiggleDistance = props.animationConfig.wiggleDistance;\n\n        this._wiggleAnimation = Animated.sequence([\n            Animated.timing(this.state.translateX, {\n                duration: duration / 2,\n                toValue: -wiggleDistance,\n                useNativeDriver: false\n            }),\n            Animated.timing(this.state.translateX, {\n                duration: duration,\n                toValue: wiggleDistance,\n                useNativeDriver: false\n            }),\n            Animated.timing(this.state.translateX, {\n                duration: this.props.animationConfig.animationDuration / 2,\n                toValue: 0,\n                useNativeDriver: false\n            })\n        ]);\n    }\n\n    public UNSAFE_componentWillReceiveProps(nextProps: WiggleAnimationProps, _nextContext: any): void {\n        if (nextProps !== this.props) {\n            const nextState: WiggleAnimationState | null = this.getAnimationStateFromProps(nextProps);\n            if (null != nextState) {\n                this.setState(nextState);\n            }\n        }\n    }\n\n    public startAnimation = () => {\n        this.animationStarted();\n        this._wiggleAnimation.reset();\n        this._wiggleAnimation.start(() => { this.animationFinished() });\n    }\n\n    public stopAnimation(): void {\n        this._wiggleAnimation.stop();\n    }\n\n    public resetAnimation(): void {\n        this.stopAnimation();\n        this.state.translateX.setValue(0);\n    }\n\n    public finishAnimation = () => {\n        this.stopAnimation();\n        // no extra op\n    }\n\n    protected renderAnimation(content: React.ReactNode): React.ReactNode {\n        const translateX = this.state.translateX;\n\n        return (\n            <Animated.View\n                style={{\n                    justifyContent: 'center',\n                    alignItems: 'center',\n                    transform: [\n                        { translateX }\n                    ]\n                }}>\n                {content}\n            </Animated.View>\n        );\n    }\n\n    protected getAnimationStateFromProps(_: WiggleAnimationProps): WiggleAnimationState {\n        return {\n            translateX: new Animated.Value(0),\n            wiggleCount: 0\n        };\n    }\n}\n"]}