{"version":3,"sources":["SlideAnimationWrapper.tsx"],"names":["SlideAnimationWrapper","BaseAnimationWrapper","constructor","props","stopAnimation","state","translate","setValue","_getFinalTranslateValue","_screenWidth","Math","round","Dimensions","get","width","_screenHeight","height","getAnimationStateFromProps","animationConfig","_animationType","type","config","fromValue","_getInitialTranslateValue","toValue","finalOffset","duration","animationDuration","_slideAnimation","Animated","timing","easing","interpolationDef","useNativeDriver","UNSAFE_componentWillReceiveProps","nextProps","_nextContext","nextState","setState","startAnimation","animationStarted","reset","start","animationFinished","stop","resetAnimation","renderAnimation","content","AnimationType","SLIDE_HORIZONTAL","justifyContent","alignItems","transform","translateX","translateY","Value","initialOffset","undefined","SLIDE_VERTICAL","direction"],"mappings":"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","sourcesContent":["import {Animated, Dimensions, TransformsStyle} from 'react-native';\nimport React from 'react';\nimport {BaseAnimationWrapper} from './BaseAnimationWrapper';\nimport {\n    SlideAnimationConfig,\n    SlideHorizontalAnimationConfig,\n    SlideHorizontalDirection,\n    SlideVerticalAnimationConfig,\n    SlideVerticalDirection\n} from '../../data/SlideAnimationConfig';\nimport {AnimationType} from '../../data/Enums';\nimport {SlideAnimationProps} from '../../Types';\nimport getEasingFunction from \"../Utils\";\n\ninterface SlideAnimationState {\n    translate: Animated.Value;\n}\n\nexport interface SlideHorizontalAnimationProps extends SlideAnimationProps {\n    animationConfig: SlideHorizontalAnimationConfig;\n}\n\nexport interface SlideVerticalAnimationProps extends SlideAnimationProps {\n    animationConfig: SlideVerticalAnimationConfig;\n}\n\nexport class SlideAnimationWrapper extends BaseAnimationWrapper<SlideAnimationProps, SlideAnimationState> {\n\n    private _slideAnimation: Animated.CompositeAnimation;\n\n    private _screenWidth: number;\n    private _screenHeight: number;\n    private _animationType: AnimationType;\n\n    public constructor(props: SlideAnimationProps) {\n        super(props);\n\n        this._screenWidth = Math.round(Dimensions.get('window').width);\n        this._screenHeight = Math.round(Dimensions.get('window').height);\n        this.state = this.getAnimationStateFromProps(props);\n\n        const {animationConfig} = this.props;\n        this._animationType = animationConfig.type;\n\n        const config = animationConfig as SlideAnimationConfig;\n        let fromValue: number = this._getInitialTranslateValue(this.props);\n        let toValue: number = config.finalOffset;\n        let duration: number = config.animationDuration;\n\n        this.state.translate.setValue(fromValue);\n        this._slideAnimation = Animated.timing(this.state.translate, {\n            duration: duration,\n            toValue: toValue,\n            easing: getEasingFunction(animationConfig.interpolationDef),\n            useNativeDriver: false\n        });\n    }\n\n    public UNSAFE_componentWillReceiveProps(nextProps: SlideAnimationProps, _nextContext: any): void {\n        if (nextProps !== this.props) {\n            const nextState: SlideAnimationState | null = this.getAnimationStateFromProps(nextProps);\n            if (null != nextState) {\n                this.setState(nextState);\n            }\n        }\n    }\n\n    public startAnimation(): void {\n        this.animationStarted();\n        this._slideAnimation.reset();\n        this._slideAnimation.start(() => {\n            this.animationFinished()\n        });\n    }\n\n    public stopAnimation(): void {\n        this._slideAnimation.stop();\n    }\n\n    public resetAnimation(): void {\n        this.stopAnimation();\n        this.state.translate.setValue(this._getInitialTranslateValue(this.props));\n    }\n\n    public finishAnimation = () => {\n        this.stopAnimation();\n        this.state.translate.setValue(this._getFinalTranslateValue(this.props));\n    }\n\n    protected renderAnimation(content: React.ReactNode): React.ReactNode {\n        if (this._animationType === AnimationType.SLIDE_HORIZONTAL) {\n            return (\n                <Animated.View style={{\n                    justifyContent: 'center',\n                    alignItems: 'center',\n                    transform: [\n                        {translateX: this.state.translate}\n                    ]\n                }}>\n                    {content}\n                </Animated.View>\n            );\n        } else {\n            return (\n                <Animated.View style={{\n                    justifyContent: 'center',\n                    alignItems: 'center',\n                    transform: [\n                        {translateY: this.state.translate}\n                    ]\n                }}>\n                    {content}\n                </Animated.View>\n            );\n        }\n\n    }\n\n    protected getAnimationStateFromProps(props: SlideAnimationProps): SlideAnimationState {\n        return {\n            translate: new Animated.Value(this._getInitialTranslateValue(props))\n        }\n    }\n\n    private _getInitialTranslateValue(props: SlideAnimationProps): number {\n        const config = props.animationConfig as SlideAnimationConfig;\n        if (config.initialOffset === undefined || config.initialOffset === 0) {\n            if (config.type === AnimationType.SLIDE_VERTICAL) {\n                const direction: SlideVerticalDirection | undefined = (config as SlideVerticalAnimationConfig).direction;\n                if (direction === \"top_down\") {\n                    return -this._screenHeight;\n                } else {\n                    return this._screenHeight;\n                }\n            } else {\n                const direction: SlideHorizontalDirection | undefined = (config as SlideHorizontalAnimationConfig).direction;\n                if (direction === \"ltr\") {\n                    return -this._screenWidth;\n                } else {\n                    return this._screenWidth;\n                }\n            }\n        } else return config.initialOffset;\n    }\n\n    private _getFinalTranslateValue(props: SlideAnimationProps): number {\n        const config = props.animationConfig as SlideAnimationConfig;\n        return config.finalOffset;\n    }\n}\n"]}